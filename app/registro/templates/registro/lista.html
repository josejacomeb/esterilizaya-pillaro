<!DOCTYPE html>
{% extends 'base.html' %}
{% load static %}
{% load django_bootstrap5 %}
{% block title %}
  Ver todos los registrados
{% endblock %}

{% block content %}
  <h2>Todos los registros</h2>
  <h3>{{ nombre_campana }}</h3>
  <div>
    <a href="{% url 'inscripcion:index' campana_id %}" class="btn btn-primary" role="button">Registrar un nuevo Tutor</a>
  </div>
  <h1>Buscar participantes</h1>
  <form method="get" action="{% url 'registro:lista' campana_id %}">
    <input type="text" name="query" placeholder="Buscar por tutor" />
    <button type="submit">Search</button>
  </form>
  {% if registros %}
    <h1>Mascotas inscritas</h1>
    <div class="table-responsive-sm">
      <table class="table">
        <tr>
          <th>Nº</th>
          <th>Número Turno</th>
          <th>Foto</th>
          <th>Nombre Mascota</th>
          <th>Nombre Tutor</th>
          <th>Especie</th>
          <th>Género</th>
          <th>Ver Ficha</th>
          <th>Imprimir ficha</th>
        </tr>
        {% for registro in registros %}
          <tr>
            <td>{{ registro.id }}</td>
            <td>{{ registro.numero_turno }}</td>
            <td>
              {% include 'registro/foto.html' with foto=registro.foto nombre=registro.nombre especie=registro.especie clase='imagen-mascotas' %}
            </td>

            <td>{{ registro.nombre }}</td>
            <td>{{ registro.nombres_tutor }}</td>
            <td>{{ registro.especie }}</td>
            <td>{{ registro.sexo }}</td>
            <td>
              <a href="{% url 'registro:ver_ficha' registro.inscripcion.campana.id registro.id %}" class="button">Ver Ficha</a>
            </td>
            <td>
              <a href="{% url 'registro:imprimir_ficha' registro.inscripcion.campana.id registro.id %}" class="button">Imprimir Ficha</a>
            </td>
          </tr>
        {% endfor %}
      </table>
    </div>
  {% else %}
    <h1>No hay mascotas registradas, por favor registre una en:</h1>
    <a href="{% url 'inscripcion:create' campana_id %}">Registrar nueva mascota</a>
  {% endif %}
  <p>
    <a href="{% url 'registro:vista_veterinarios' campana_id %}" class="button">👩🏻‍⚕️Vista Veterinarios🐕‍🦺</a>
  </p>
  <p>
    <a href="{% url 'registro:ver_certificados' campana_id %}" class="button">Imprimir Certificados</a>
  </p>
  <p>
    <a href="{% url 'registro:ver_recetas' campana_id %}" class="button">Imprimir Recetas</a>
  </p>
{% endblock %}
