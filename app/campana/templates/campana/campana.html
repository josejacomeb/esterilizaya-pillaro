{% extends 'base.html' %}
{% load django_bootstrap5 %}
{% block title %}
  Todas las campañas
{% endblock %}

{% block content %}
  <h3>Datos Campaña</h3>
  <ul class="list-group list-group-flush">
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <span class="badge {% if campana.estado == 'AC' %}
           text-bg-success
        {% else %}
           text-bg-warning
        {% endif %}">
        {{ campana.get_estado_display }}
      </span>
      {{ campana.nombre }}
    </li>
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <strong>Parroquia:</strong> {{ campana.get_parroquia_display }}
    </li>
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <strong>Barrio:</strong> {{ campana.barrio }}
    </li>
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <strong>Fecha:</strong> {{ campana.fecha }}
    </li>
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <strong>Nº animales:</strong> {{ campana.n_animales }}
    </li>
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <strong>Estado:</strong> {{ campana.get_estado_display }}
    </li>
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <i>Creado por:</i> {{ campana.usuario }}
    </li>
    {% if request.user.is_authenticated %}
      {% if campana.estado == 'AC' %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          {% url 'inscripcion:create' campana.id as url_nueva %}
          {% bootstrap_button 'Nueva inscripción' button_type='link' button_class='btn-info' href=url_nueva %}
        </li>
      {% endif %}
    {% endif %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <a href="{% url 'inscripcion:index' campana.id %}">Nuevo Registro</a>
      <span class="badge bg-primary rounded-pill">{{ n_inscritos }}</span>
    </li>
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <a href="{% url 'registro:lista' campana.id %}">Todos los registros</a>
      <span class="badge bg-primary rounded-pill">{{ n_registrados }}</span>
    </li>
  </ul>
{% endblock %}
